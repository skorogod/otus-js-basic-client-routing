(()=>{"use strict";var n=function(){return n=Object.assign||function(n){for(var t,e=1,o=arguments.length;e<o;e++)for(var r in t=arguments[e])Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},n.apply(this,arguments)},t=function(n,t,e,o){return new(e||(e=Promise))((function(r,c){function a(n){try{u(o.next(n))}catch(n){c(n)}}function i(n){try{u(o.throw(n))}catch(n){c(n)}}function u(n){var t;n.done?r(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(a,i)}u((o=o.apply(n,t||[])).next())}))},e=function(n,t){var e,o,r,c,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return c={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function i(i){return function(u){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(a=0)),a;)try{if(e=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(n,a)}catch(n){i=[6,n],o=0}finally{e=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},o=function(t){var e=this,o=[],r=location.pathname,c=null,a=function(n,t){return n instanceof RegExp&&n.test(t)||"function"==typeof n&&n(t)||"string"==typeof n&&n===t},i=function(t){var o,i,u,l,f=t.match,s=t.onEnter,h=t.onBeforeEnter,p=t.onLeave,d=t.params;return o=e,i=void 0,l=function(){return function(n,t){var e,o,r,c,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return c={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function i(i){return function(u){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(a=0)),a;)try{if(e=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(n,a)}catch(n){i=[6,n],o=0}finally{e=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,(function(t){switch(t.label){case 0:return d="object"==typeof d?n(n({},d),{currentPath:r,previousPath:c,state:history.state}):{currentPath:r,previousPath:c,state:history.state},console.log("match ",f),console.log("curr ",r),a(f,r)?h?[4,h(d)]:[3,2]:[3,4];case 1:t.sent(),t.label=2;case 2:return console.log(r),[4,s(d)];case 3:t.sent(),t.label=4;case 4:return p&&a(f,c)?[4,p(d)]:[3,6];case 5:t.sent(),t.label=6;case 6:return[2]}}))},new((u=void 0)||(u=Promise))((function(n,t){function e(n){try{c(l.next(n))}catch(n){t(n)}}function r(n){try{c(l.throw(n))}catch(n){t(n)}}function c(t){var o;t.done?n(t.value):(o=t.value,o instanceof u?o:new u((function(n){n(o)}))).then(e,r)}c((l=l.apply(o,i||[])).next())}))},u=function(){return o.forEach(i)},l=function(n,t){c=r,location.hash=n};return window.addEventListener("popstate",(function(){c=r,r=location.pathname,u()})),window.addEventListener("hashchange",(function(){var n=location.href.match(/\/#(.*)$/);r=n?n[1]:"/",u()})),window.addEventListener("load",(function(){document.body.addEventListener("click",(function(n){var t,e=n.target;e.matches("a")&&(n.preventDefault(),t=e.getAttribute("href"),l(t))}))})),{on:function(n,t,e,r,c){var a=function(){for(var n=function(){return Math.floor(Math.random()*o.length*1e3)},t=function(n){return o.find((function(t){return t.id===n}))},e=n();t(e);)e=n();return e}(),u={id:a,match:n,onEnter:t,onBeforeEnter:e,onLeave:r,params:c};return o.push(u),i(u),function(){o=o.filter((function(n){return n.id!==a}))}},go:l}}(),r=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.info("".concat(n," args=").concat(JSON.stringify(t)));var o=document.getElementById("root");o&&(o.innerHTML="<h2>".concat(n,"</h2>"))}},c=o.on(/.*/,r("/.*"),(function(){return console.log("before Enter")}),(function(){return console.log("LEAVE")}));o.on("/about",r("ABOUT"),(function(){return console.log("ENTER ABOUT")}),(function(){return console.log("LEAVE ABOUT")})),o.on("/checkAsync",r("ASYNC"),(function(){return t(void 0,void 0,void 0,(function(){return e(this,(function(n){return setTimeout((function(){return console.log("check async")}),1e4),[2]}))}))})),o.on("/index",r("index"),(function(){return t(void 0,void 0,void 0,(function(){return e(this,(function(n){return setTimeout((function(){return console.log("check index")}),1e4),[2]}))}))})),c()})();